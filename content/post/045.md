---
title: "ç‹¬è§’æ•°å¡å‘å¡å®å¡”å®‰è£…æ•™ç¨‹"
date: 2023-08-12T01:01:01+08:00
lastmod: 2023-08-12T01:01:01+08:00
draft: false
description: ""
tags: [ç‹¬è§’æ•°å¡,å‘å¡]
categories: []

weight: false
comment: true
toc: true
autoCollapseToc: false # æ˜¯å¦è‡ªåŠ¨æŠ˜å ç›®å½•
contentCopyright: false
reward: false # å¼€å¯æ‰“èµ
#menu:
   #main:
     #parent: ""
     #weight:
---

ç‹¬è§’æ•°å¡å‘å¡å®å¡”å®‰è£…æ•™ç¨‹è¯¦ç»†è®°å½•(è½¬è½½äºgithub)

<!--more-->

## å‰æ™¯æ¦‚è¦

```
âš ï¸æ­£å¼ä¸Šçº¿åä¸€å®šè¦å°†.envé…ç½®é‡Œé¢çš„APP_DEBUGè®¾ç½®ä¸ºfalseâš ï¸`
`âš ï¸æ­£å¼ä¸Šçº¿åä¸€å®šè¦å°†.envé…ç½®é‡Œé¢çš„APP_DEBUGè®¾ç½®ä¸ºfalseâš ï¸`
`âš ï¸æ­£å¼ä¸Šçº¿åä¸€å®šè¦å°†.envé…ç½®é‡Œé¢çš„APP_DEBUGè®¾ç½®ä¸ºfalseâš ï¸
```

### æ­é…è§†é¢‘æ•™ç¨‹é£Ÿç”¨æ›´ä½³

è¯·è‡ªå¤‡æ¢¯å­ğŸªœç§‘å­¦ä¸Šç½‘
[è§†é¢‘æ•™ç¨‹ğŸ‘‰ğŸ»https://t.me/dujiaoshuka/22](https://t.me/dujiaoshuka/22)

é¦–å…ˆï¼š ä½ éœ€è¦ä¸€å°å†…å­˜`512M`æˆ–ä»¥ä¸Šä¸ºæœ€ä½³çš„vpsæˆ–äº‘æœåŠ¡å™¨
å…¶æ¬¡ ä½ çš„æœåŠ¡å™¨æ“ä½œç³»ç»Ÿè¦ä¸º `linux` å†…æ ¸ï¼Œæˆ‘å¯ä¸ç®¡ä½ æ˜¯ä»€ä¹ˆ`centos`å…šè¿˜æ˜¯`ubuntu`å…š

ä»€ä¹ˆï¼Ÿ æ²¡æœ‰ï¼Ÿ é‚£è¯·ç‚¹å‡»æµè§ˆå™¨å³ä¸Šè§’çš„Xå·!

## å®å¡”å®‰è£…

ç›´æ¥è‡ªå·±å»çœ‹å§: [bt.cn](https://bt.cn/)ã€‚
å¦‚æœå®å¡”éƒ½ä¸ä¼šç©æˆ‘å»ºè®®ä½ æ”¾å¼ƒ~

## å¿…è£…ç¯å¢ƒ

æ¥ä¸‹æ¥æˆ‘ä»¬å®‰è£…ä¸€ä¸‹ä¸‹å›¾å…­ä¸ªè½¯ä»¶ï¼š
![å¿…è£…è½¯ä»¶](https://r2.leshans.eu.org/2023/08/e839e695ceb7b2e61838198628bccbb9.)

æœ€å¥½æ˜¯ç¼–è¯‘å®‰è£…å“¦ï¼Œæ€§èƒ½æ›´å¥½ã€‚
ğŸ™‹ç”±äºåœ¨ä¹‹å‰ç‰ˆæœ¬å¾ˆå¤šåŒå­¦ä¸ä¼šä½¿ç”¨`supervisor`ï¼Œæ‰€ä»¥2.0.+ç‰ˆæœ¬æˆ‘ä»¬ä¼šé‡‡ç”¨è¾ƒä¸ºç®€å•çš„`å ¡å¡”åº”ç”¨ç®¡ç†å™¨`æ¥å®ç°å®ˆæŠ¤è¿›ç¨‹ã€‚

## PHPç¯å¢ƒç¡®è®¤

### ä¸€ã€ æ¥ä¸‹æ¥æˆ‘ä»¬æŒ‰ç…§æ­¥éª¤åˆ é™¤ä¸€ä¸‹phpçš„ç¦ç”¨å‡½æ•°

ï¼ˆps:å®å¡”é»˜è®¤ä¼šç¦ç”¨ä¸€äº›phpçš„å‡½æ•°ï¼Œå¯¼è‡´artisanå‘½ä»¤æ— æ³•æ­£ç¡®è¿è¡Œï¼‰

ç‚¹å‡»ã€è½¯ä»¶å•†åº—ã€‘->ã€PHPè®¾ç½®ã€‘->ã€ç¦ç”¨å‡½æ•°åˆ—è¡¨ã€‘ å°†ä»¥ä¸‹å‡½æ•°åˆ é™¤ï¼ï¼
`putenv`ï¼Œ`proc_open`ï¼Œ`pcntl_signal`ï¼Œ`pcntl_alarm`

![ç¦ç”¨å‡½æ•°åˆ—è¡¨.png](https://r2.leshans.eu.org/2023/08/944c5a01c8b2a7a9089978445c5a1af0.)

### äºŒã€ æˆ‘ä»¬å†è£…ä¸€ä¸‹å¿…è¦çš„ä¸¤ä¸ªæ‰©å±•

ç‚¹å‡»ã€è½¯ä»¶å•†åº—ã€‘->ã€PHPè®¾ç½®ã€‘->ã€å®‰è£…æ‰©å±•ã€‘
å®‰è£…ä»¥ä¸‹ä¸‰ä¸ªæ‰©å±•ï¼š
`fileinfo`ã€`redis`ã€`opcache(å¯é€‰å®‰è£…ï¼Œæ€§èƒ½åŠ å¼º)`

![å®‰è£…æ‰©å±•.png](https://r2.leshans.eu.org/2023/08/7354d8fe886cb9f0ddb5ba45e06b6cd6.)

## æ–°å»ºä¸€ä¸ªç½‘ç«™

### ä¸€ã€åœ¨å®å¡”é‡Œæ–°å»ºä¸€ä¸ªç½‘ç«™ç”¨äºè¿è¡Œæœ¬é¡¹ç›®

![æ–°å»ºä¸€ä¸ªç½‘ç«™.png](https://r2.leshans.eu.org/2023/08/8649ff9becb474e7673a90568280bd27.)

### äºŒã€ä¸Šä¼ æˆ‘ä»¬çš„é¡¹ç›®ä»£ç 

è¯·é€‰æ‹©xxx_build.tar.gzå‹ç¼©åŒ…ã€‚
âš ï¸ä¸€å®šè¦é€‰æ‹©å¸¦buildå­—æ ·çš„åŒ…ï¼Œæ‰æœ‰ä¾èµ–ï¼
ç‹¬è§’æ•°å¡å‘è¡Œç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼š[ç‹¬è§’æ•°å¡å„å‘è¡Œç‰ˆæœ¬](https://github.com/assimon/dujiaoka/releases)

### ä¸‰ã€è®¾ç½®é¡¹ç›®ä¼ªé™æ€å’Œè¿è¡Œç›®å½•

è§£å‹é¡¹ç›®ä»£ç åï¼Œæˆ‘ä»¬ç‚¹å‡»ç½‘ç«™çš„`è®¾ç½®`
è®¾ç½®è¿è¡Œç›®å½•ï¼š ![è®¾ç½®ç½‘ç«™è¿è¡Œç›®å½•.png](https://r2.leshans.eu.org/2023/08/f467f7b615a5318d4577f287015a74cc.) è®¾ç½®ä¼ªé™æ€ï¼š
![ä¼ªé™æ€.png](https://r2.leshans.eu.org/2023/08/f96333932694eb54bbf5e48a2560e66f.)

## å¼€å§‹å®‰è£…

### ä¸€ã€è®¿é—®ä½ çš„ç½‘ç«™åŸŸåï¼Œè¿›å…¥å®‰è£…æµç¨‹

### äºŒã€æŒ‰å®é™…æƒ…å†µå¡«å†™ç½‘ç«™é…ç½®ä¿¡æ¯

![å®‰è£…é¡µé¢](https://r2.leshans.eu.org/2023/08/30a7266885d4d8013a6a4a9d54cd66bf.)

## é…ç½®å®ˆæŠ¤è¿›ç¨‹

æ³¨æ„ï¼Œå¾ˆå¤šäººå«Œéº»çƒ¦ä¸é…ç½®è¿™ä¸€æ­¥ï¼Œé‚£ä½ å‡ºäº†é—®é¢˜åˆ«å“”å“”ï¼âš  âš  âš 
æ³¨æ„ï¼Œå¾ˆå¤šäººå«Œéº»çƒ¦ä¸é…ç½®è¿™ä¸€æ­¥ï¼Œé‚£ä½ å‡ºäº†é—®é¢˜åˆ«å“”å“”ï¼âš  âš  âš 
æ³¨æ„ï¼Œå¾ˆå¤šäººå«Œéº»çƒ¦ä¸é…ç½®è¿™ä¸€æ­¥ï¼Œé‚£ä½ å‡ºäº†é—®é¢˜åˆ«å“”å“”ï¼âš  âš  âš 

`å ¡å¡”åº”ç”¨ç®¡ç†å™¨`æ˜¯æˆ‘ä»¬ç”¨æ¥ç®¡ç†laravelé˜Ÿåˆ—è¿›ç¨‹çš„å·¥å…·ã€‚

å¾ˆå¤šåŒå­¦å–œæ¬¢é—®å¯ä¸å¯ä»¥ä¸æ‰§è¡Œè¿™ä¸€æ­¥ã€‚

ç°åœ¨æˆ‘æ˜ç¡®çš„å‘Šè¯‰ä½ ï¼Œä¸å¯ä»¥ï¼è¯·æŒ‰ç…§æ•™ç¨‹æ¥ï¼Œä¸ç„¶å¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨ã€‚ğŸ™…â€â™€ï¸

æ²¡æœ‰å®ƒçš„è¯ä½ çš„ç¨‹åºæ‰§è¡Œä¼šå¼‚å¸¸ï¼

å¦‚æœä¸å–œæ¬¢ä½¿ç”¨`å ¡å¡”åº”ç”¨ç®¡ç†å™¨`ï¼Œé‚£ä¹ˆä½¿ç”¨1.xç‰ˆæœ¬`supervisor`ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸¤ä¸ªå¿…é¡»é€‰ä¸€ä¸ªï¼ å¿…é€‰é¢˜ï¼

### ä¸€ã€å ¡å¡”åº”ç”¨ç®¡ç†å™¨é…ç½®æ•™ç¨‹

è¿›å…¥å®å¡”æ§åˆ¶é¢æ¿ï¼š æ­¥éª¤ï¼šã€è½¯ä»¶å•†åº—ã€‘->ã€å ¡å¡”åº”ç”¨ç®¡ç†å™¨è®¾ç½®ã€‘->ã€æ·»åŠ åº”ç”¨ã€‘ å¦‚å›¾ï¼š ![å®ˆæŠ¤è¿›ç¨‹é…ç½®](https://r2.leshans.eu.org/2023/08/e83930603e2cf3ad2f5a5f47e3d346c2.)

åç§°ï¼šéšæ„ï¼Œå¦‚dujiao
åº”ç”¨ç¯å¢ƒ: é€‰æ‹©php7.4
å¯åŠ¨æ–‡ä»¶: ç½‘ç«™æ ¹ç›®å½• + `/artisan`
æ‰§è¡Œç›®å½•: ç½‘ç«™æ ¹ç›®å½•
å¯åŠ¨å‚æ•°: ` queue:work`

ä¿å­˜å³å¯!

å¦‚æœé‡åˆ°æ²¡æœ‰è‡ªå·±çš„phpç‰ˆæœ¬æ€ä¹ˆåŠï¼Ÿæˆ–è€…ç³»ç»Ÿæœ‰å¤šä¸ªphpç‰ˆæœ¬ï¼Œä½†æ˜¯åº”ç”¨ç¯å¢ƒæ²¡æœ‰è‡ªå·±æƒ³è¦çš„é‚£ä¸ªphpç‰ˆæœ¬æ€ä¹ˆåŠï¼Ÿ

è¯·çœ‹ä¸‹ä¸€æ­¥æ–°å¢åº”ç”¨ç¯å¢ƒ

#### æ–°å¢åº”ç”¨ç¯å¢ƒ

![æ–°å¢åº”ç”¨ç¯å¢ƒ](https://r2.leshans.eu.org/2023/08/f16f93e99135622c62d6574b1a967e4d.)

ç¯å¢ƒåç§°å¯ä»¥éšä¾¿å¡«ã€‚

å¯åŠ¨æ–‡ä»¶ä¸€èˆ¬æ˜¯ `/www/server/php/72/bin/php`

âš ï¸æ³¨æ„å“¦ï¼Œæˆ‘è¿™é‡Œæ˜¯72å°±æ˜¯php7.2ï¼Œä½ å¯èƒ½æ˜¯73æˆ–è€…74ã€‚æŒ‰ç…§è‡ªå·±æ¥ï¼Œæˆ‘è¿™é‡Œåªæ˜¯ä¸¾ä¾‹ï¼

### äºŒã€supervisoré…ç½®æ•™ç¨‹

æ­¥éª¤ï¼šã€è½¯ä»¶å•†åº—ã€‘->ã€Supervisorè®¾ç½®ã€‘->ã€æ·»åŠ å®ˆæŠ¤è¿›ç¨‹ã€‘ å¦‚å›¾ï¼š ![å®ˆæŠ¤è¿›ç¨‹é…ç½®](https://r2.leshans.eu.org/2023/08/d87497f07bf1ddd37920e1d4aab00027.)

å‘½ä»¤å‚è€ƒï¼š

```
/www/server/php/74/bin/php /www/wwwroot/dujiaoka/artisan queue:work
```



åç§°ï¼šéšæ„å¡«å†™
å¯åŠ¨ç”¨æˆ·ï¼šé€‰æ‹©www
è¿è¡Œç›®å½•ï¼šé€‰æ‹©ç¨‹åºæ ¹ç›®å½•
å¯åŠ¨å‘½ä»¤ï¼š/www/server/php/ä½ çš„phpç‰ˆæœ¬/bin/php /www/wwwroot/ä½ çš„ç½‘ç«™æ ¹ç›®å½•/artisan queue:work

è¯·æ³¨æ„ä½ è‡ªå·±çš„phpç‰ˆæœ¬å’Œç½‘ç«™æ ¹ç›®å½•ã€‚ä¸è¦çæŠ„ç…§ç€æˆ‘çš„å†™ï¼Ÿ æ³¨æ„å‘½ä»¤ä¹‹é—´çš„ç©ºæ ¼ã€‚
